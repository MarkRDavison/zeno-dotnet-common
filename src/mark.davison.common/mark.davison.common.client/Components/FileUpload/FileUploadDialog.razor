@namespace mark.davison.common.client.Components

@typeparam T where T : class, new()

<MudDialog>
    <DialogContent>
        <MudStack Style="width: 100%">
            @if (data == null)
            {
                <MudFileUpload T="IBrowserFile"
                    AppendMultipleFiles="false"
                    OnFilesChanged="OnInputFileChanged"
                    Hidden="@false"
                    InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20"
                    InputStyle="opacity:0"> 
                    <ButtonTemplate>
                        <MudButton HtmlTag="label"
                                   Variant="Variant.Filled"
                                   Color="Color.Primary"
                                   StartIcon="@Icons.Material.Filled.CloudUpload">
                            Upload file
                        </MudButton>
                    </ButtonTemplate>
                </MudFileUpload>
            }
            else 
            {
                <MudText Typo="Typo.body1">@GetParsedInputDisplayText()</MudText>
            }
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Secondary">Cancel</MudButton>
        <MudButton Disabled="@_primaryDisabled" Color="Color" OnClick="Primary">
            @if (_inProgress)
            {
                <MudProgressCircular Size="Size.Small" Color="Color" Indeterminate="true" />
            }
            else
            {
                @PrimaryText
            }
        </MudButton>
    </DialogActions>
</MudDialog>